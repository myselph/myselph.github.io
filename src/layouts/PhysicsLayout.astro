---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const { title, description } = Astro.props;

const physicsPages = [
    { url: "/game_physics", title: "Overview" },
    { url: "/game_physics/unconstrained", title: "Unconstrained" },
    { url: "/game_physics/equalityConstraints", title: "Equality Constraints" },
    {
        url: "/game_physics/inequalityConstraints",
        title: "Inequality Constraints",
    },
    { url: "/game_physics/friction", title: "Friction" },
    { url: "/game_physics/collisionDetection", title: "Collision Detection" },
    { url: "/game_physics/links", title: "Links" },
];
---

<html lang="en">
    <head>
        <BaseHead title={title} description={description} />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css"
            integrity="sha384-zh0SSt97UCG74fFkdjW9qGisSnhvHEAbuyLo8Wgl7fcxg6iK6E3Kzps3LqzQ20eR"
            crossorigin="anonymous"
        />
        <script
            is:inline
            defer
            src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"
        ></script>
        <script
            is:inline
            defer
            src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
        ></script>
        <script is:inline>
            document.addEventListener("DOMContentLoaded", function () {
                renderMathInElement(document.body, {
                    delimiters: [
                        { left: "$$", right: "$$", display: true },
                        { left: "$", right: "$", display: false },
                    ],
                    throwOnError: false,
                });
            });
        </script>
        <style>
            main {
                width: calc(100% - 2em);
                max-width: 960px;
                margin: 0 auto;
                padding: 1em;
            }
            .physics-nav {
                margin-bottom: 2em;
                border-bottom: 1px solid #eee;
                padding-bottom: 1em;
            }
            .physics-nav ul {
                list-style: none;
                padding: 0;
                display: flex;
                flex-wrap: wrap;
                gap: 1em;
            }
            .physics-nav a {
                text-decoration: none;
                color: #333;
                font-weight: 500;
            }
            .physics-nav a.active {
                color: #7289da;
                border-bottom: 2px solid #7289da;
            }
            .prose {
                color: #333;
                line-height: 1.6;
            }
            .prose :global(h2),
            .prose :global(h3) {
                clear: both;
            }
            .prose :global(img.tex) {
                vertical-align: middle;
                margin: 0 0.2em;
            }
            .prose :global(.thumb) {
                margin: 1em 0;
                border: 1px solid #ccc;
                padding: 3px;
                background-color: #f9f9f9;
            }
            .prose :global(.thumbinner) {
                border: 1px solid #ccc;
                padding: 3px;
                background-color: #f9f9f9;
                font-size: 94%;
                text-align: center;
                overflow: hidden;
            }
            .prose :global(.thumbcaption) {
                border: none;
                line-height: 1.4em;
                padding: 3px;
                font-size: 94%;
                text-align: left;
            }
            .prose :global(.tright) {
                float: right;
                clear: right;
                margin: 0.5em 0 1.3em 1.4em;
            }
            .prose :global(.tleft) {
                float: left;
                clear: left;
                margin: 0.5em 1.4em 1.3em 0;
            }
            :global(.simulation-container) {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                margin: 2em 0;
                padding: 1.5em;
                background: #f8f9fa;
                border: 1px solid #dee2e6;
                border-radius: 8px;
            }
            :global(.simulation-container h3) {
                width: 100%;
                margin-top: 0;
                margin-bottom: 15px;
                border-bottom: 1px solid #dee2e6;
                padding-bottom: 10px;
            }
            :global(.simulation-canvas-wrapper) {
                flex: 1;
                min-width: 300px;
                height: 480px;
                background: white;
                border: 1px solid #ddd;
                position: relative;
            }
            :global(.simulation-controls) {
                width: 250px;
            }
            :global(.simulation-controls table) {
                width: 100%;
            }
            :global(.simulation-controls td) {
                padding: 4px;
            }
            :global(.simulation-controls input),
            :global(.simulation-controls select) {
                width: 100%;
            }
            :global(button.start-button) {
                width: 100%;
                margin-top: 1em;
                padding: 0.5em;
                background: #7289da;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }
            :global(button.start-button:hover) {
                background: #5b6eae;
            }
        </style>
    </head>

    <body>
        <Header />
        <main>
            <nav class="physics-nav">
                <ul>
                    {
                        physicsPages.map((page) => (
                            <li>
                                <a
                                    href={page.url}
                                    class={
                                        Astro.url.pathname === page.url ||
                                        Astro.url.pathname === page.url + "/"
                                            ? "active"
                                            : ""
                                    }
                                >
                                    {page.title}
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </nav>
            <article class="prose">
                <h1>{title}</h1>
                <slot />
            </article>
        </main>
        <Footer />
    </body>
</html>
